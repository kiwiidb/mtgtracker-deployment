mtgtracker:
  image:
    repository: ghcr.io/kiwiidb/mtgtracker
    tag: main-f71d483
  env:
    FIREBASE_CONFIG: /etc/firebase/firebase.json
    GOOGLE_APPLICATION_CREDENTIALS: /etc/firebase/firebase.json
  volumes:
    - name: firebase-config
      secret:
        secretName: firebase-credentials
  volumeMounts:
    - name: firebase-config
      mountPath: /etc/firebase
  secrets:
    POSTGRES_DSN:
      secretName: database-credentials
      secretKey: connectionstring
  ingress:
    enabled: false
    annotations:
      kubernetes.io/ingress.class: ingress-nginx
      cert-manager.io/cluster-issuer: letsencrypt-prod
      nginx.ingress.kubernetes.io/rewrite-target: /
    hosts:
      - host: api-staging.plowshare.social
        paths:
          - path: /
            pathType: Prefix
    tls:
      - hosts:
          - api-staging.plowshare.social
        secretName: letsencrypt-prod